# GazelleSort
Rename all your music folders using data from a torrent tracker based on Gazelle.

## Abstract
Folder names of torrents aren't standardized, making it difficult to browse through them.
GazelleSort utilizes data from the Gazelle API to create consistently named **hardlinks** of your music. 

## How it operates
GazelleSort first parses all torrents listed as 'seeding' for the user account provided.
After fetching this list, all the data associated with the torrent gets pulled via the Gazelle API. Due to the rate limiting, this step takes the longest time.
Now the actual hardlinking can start. For this, the new folder name is generated by using the user-provided information on how to construct it.
If your folder already exists, it is just skipped.

## Installation
Required python modules:
```
appdirs
ratelimit
requests
```

The installation process will be made easier if demand is there. For now, this is a quick way to get started without permanently polluting your system:
1. navigate to a folder where GazelleSort can reside in, e.g. your home folder
2. `git clone https://github.com/DrLuke/GazelleSort`
3. `cd GazelleSort`
4. `virtualenv venv`
5. `source venv/bin/activate`
6. `pip install appdirs ratelimit requests`
7. `python gazellesort.py`

If you want to delete GazelleSort, just delete the folder and the config file it creates on the first run.

## Configuration
GazelleSort uses a **json** file to configure how it shall operate. 
When you first run the tool without any arguments, it will put a template called `config.json` in the default config directory (usually `~/.config/GazelleSort`).
It looks like this:
```
{
    "url": "",
    "username": "",
    "password": "",
    "torrentdir": "",
    "destdirs": {
        "flac24bit": "",
        "flac": "",
        "320": "",
        "v0": "",
        "v2": ""
    },
    "pattern": {
        "string": "%(artist)s - %(album)s (%(year)s) [%(format)s]",
        "variousartists": "Various Artists",
        "artistjoiner": " & ",
        "listindividualartists": 2
    }
}
```

* `url` (string)  
  Url to the tracker. Example: `https://footracker.bar`
  
* `username` (string)  
  Username on tracker
  
* `password` (string)  
  Password for username
  
* `torrentdir` (string)  
  Directory in which the downloaded files reside. Example: `/media/torrents`
  
* `destdirs` (object)  
  Object containing destinations for different formats. This is subject to change in the near future.  
  Example: `"flac": "/media/music/flac"`
  
* `pattern` (object)  
  Defines how the new names shall be generated.
  * `string` (string)  
    Printf-style formatting string. See [Python Documentation](https://docs.python.org/3/library/stdtypes.html#printf-style-string-formatting) for more info on what that means.  
    Gazellesort will provide the following options for named specifiers:
    * `artist` Name of the artist. If there are multiple artists, this will be all their names concatenated with the chosen joiner, or replaced with a string denoting various artists.
    * `album` Name of the Album/EP/Single.
    * `year` Year of the release.
    * `format` Format of release. 
    * `media` Media of release.  
    More specifiers will be added in the future. Open an issue to request one.
  * `variousartists` (string)  
    How to denote 'various artists'. Example: `VA` or `Various Artists`
  * `artistjoiner` (string)  
    How multiple artists shall be joined together. Example: ` & ` will produce `Foo McBar & Dj Baz`
  * `listindividualartists` (int)  
    How many individual artists shall be listed before putting switching to various artists.


## TODOs, planned features, and other things
* **Automatically creating/correcting .m3u files**  
  On some torrents, the playlist files are corrupted or use absolute paths. Using some heuristics it should be possible to detect and reconstruct such files.
* **Other kinds of linking**  
  Provide the option to choose between hardlinking and copying. Useful for windows users or when you want to use this tool across different filesystems.
* **Detect MP3 formats**  
  Currently MP3 are completely ignored.
* **Auto-Transcoding**
  Automatically transcode files into an MP3 format if the user so desires. This way you can keep two identical copies of your library, but with different encodings.

